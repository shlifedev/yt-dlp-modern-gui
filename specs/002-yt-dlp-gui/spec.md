# Feature Specification: yt-dlp GUI

**Feature Branch**: `002-yt-dlp-gui`
**Created**: 2026-02-13
**Status**: Draft
**Input**: User description: "이 앱은 yt-dlp gui 앱입니다. 사용자가 원하는 유튜브 비디오나 채널의 비디오들을 다운로드 할수 있어야합니다."

## Clarifications

### Session 2026-02-13

- Q: yt-dlp 및 ffmpeg 의존성 관리 방식은? → A: 자동 다운로드 - 첫 실행 시 yt-dlp와 ffmpeg를 자동으로 다운로드/설치
- Q: 지원 사이트 범위는? → A: YouTube 전용 - YouTube URL만 지원하고 UI를 YouTube에 최적화
- Q: 연령 제한/회원 전용 콘텐츠 인증 방식은? → A: 브라우저 쿠키 - 설치된 브라우저에서 쿠키를 자동으로 가져와 사용
- Q: 다운로드 이력 관리 방식은? → A: 간단한 이력 - 다운로드 완료 목록을 저장하여 조회 가능 (제목, 날짜, 경로)

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 단일 비디오 다운로드 (Priority: P1)

사용자가 YouTube 비디오 URL을 입력하면 해당 비디오의 정보(제목, 썸네일, 길이, 사용 가능한 화질 목록)를 미리보기로 확인한 후, 원하는 화질과 포맷을 선택하여 다운로드할 수 있다. 다운로드 진행 상황이 실시간으로 표시되며, 완료 시 알림을 받는다.

**Why this priority**: 비디오 다운로드는 앱의 핵심 기능이며, 단일 URL 다운로드가 가장 기본적이고 빈번한 사용 사례이다. 이것만으로도 MVP로서 충분한 가치를 제공한다.

**Independent Test**: YouTube 비디오 URL 하나를 붙여넣고 다운로드 완료까지의 전체 흐름을 테스트할 수 있다. 파일이 지정 위치에 정상 저장되는지 확인하면 된다.

**Acceptance Scenarios**:

1. **Given** 앱이 실행된 상태, **When** 사용자가 유효한 YouTube 비디오 URL을 입력란에 붙여넣고 확인을 누르면, **Then** 비디오 제목, 썸네일, 길이, 사용 가능한 화질/포맷 목록이 표시된다.
2. **Given** 비디오 정보가 표시된 상태, **When** 사용자가 화질(예: 1080p)을 선택하고 다운로드 버튼을 누르면, **Then** 다운로드가 시작되고 진행률(퍼센트, 속도, 남은 시간)이 실시간으로 표시된다.
3. **Given** 다운로드가 진행 중인 상태, **When** 다운로드가 완료되면, **Then** 완료 알림이 표시되고 다운로드된 파일의 위치를 확인할 수 있다.
4. **Given** 다운로드가 진행 중인 상태, **When** 사용자가 취소 버튼을 누르면, **Then** 다운로드가 즉시 중단되고 불완전한 파일이 정리된다.

---

### User Story 2 - 채널 비디오 탐색 및 다운로드 (Priority: P2)

사용자가 YouTube 채널 URL을 입력하면 해당 채널의 비디오 목록이 표시된다. 사용자는 목록에서 원하는 비디오를 개별 또는 일괄 선택하여 다운로드할 수 있다. 선택된 비디오들은 다운로드 큐에 추가되어 순차적으로 처리된다.

**Why this priority**: 채널 단위 다운로드는 사용자 설명에 명시된 핵심 요구사항이며, 단일 비디오 다운로드 기능 위에 자연스럽게 확장되는 기능이다.

**Independent Test**: YouTube 채널 URL을 입력하고, 비디오 목록이 로드되는지, 여러 비디오를 선택하여 일괄 다운로드가 정상 동작하는지 테스트할 수 있다.

**Acceptance Scenarios**:

1. **Given** 앱이 실행된 상태, **When** 사용자가 유효한 YouTube 채널 URL을 입력하면, **Then** 채널명과 비디오 목록(썸네일, 제목, 길이, 게시일)이 표시된다.
2. **Given** 채널 비디오 목록이 표시된 상태, **When** 사용자가 개별 비디오를 클릭하거나 "전체 선택" 체크박스를 사용하면, **Then** 선택된 비디오가 시각적으로 표시되고 선택 개수가 업데이트된다.
3. **Given** 하나 이상의 비디오가 선택된 상태, **When** 사용자가 "선택 다운로드" 버튼을 누르면, **Then** 선택된 비디오들이 다운로드 큐에 추가되고 순차적으로 다운로드가 진행된다.
4. **Given** 채널에 비디오가 매우 많은 경우(100개 이상), **When** 비디오 목록을 스크롤하면, **Then** 추가 비디오가 점진적으로 로드된다(무한 스크롤 또는 페이지네이션).

---

### User Story 3 - 다운로드 큐 관리 (Priority: P3)

사용자가 여러 비디오를 다운로드할 때, 다운로드 큐를 통해 전체 진행 상황을 한눈에 파악하고 관리할 수 있다. 큐에서 개별 항목의 상태 확인, 일시정지, 취소, 재시도가 가능하다.

**Why this priority**: 채널 다운로드와 함께 여러 파일을 관리하는 기능은 사용성을 크게 향상시키지만, 핵심 다운로드 기능이 먼저 동작해야 의미가 있다.

**Independent Test**: 여러 비디오를 다운로드 큐에 추가한 후, 큐 내에서 순서 변경, 일시정지, 취소, 재시도 등의 조작이 정상 동작하는지 테스트할 수 있다.

**Acceptance Scenarios**:

1. **Given** 다운로드 큐에 여러 항목이 있는 상태, **When** 사용자가 큐 화면을 열면, **Then** 각 항목의 제목, 진행률, 상태(대기/진행 중/완료/오류)가 목록으로 표시된다.
2. **Given** 진행 중인 다운로드가 있는 상태, **When** 사용자가 특정 항목의 일시정지 버튼을 누르면, **Then** 해당 다운로드가 일시정지되고 다음 대기 항목이 시작된다.
3. **Given** 다운로드가 오류로 실패한 항목이 있는 상태, **When** 사용자가 재시도 버튼을 누르면, **Then** 해당 항목의 다운로드가 다시 시작된다.

---

### User Story 4 - 다운로드 설정 관리 (Priority: P4)

사용자가 기본 다운로드 경로, 기본 화질, 동시 다운로드 수 등의 설정을 구성하고 저장할 수 있다. 설정은 앱 재시작 후에도 유지된다.

**Why this priority**: 설정은 사용 편의성을 높이지만, 기본값으로도 앱이 동작할 수 있으므로 핵심 기능 이후에 구현해도 된다.

**Independent Test**: 설정 화면에서 다운로드 경로와 기본 화질을 변경한 후 앱을 재시작하여 설정이 유지되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 앱이 실행된 상태, **When** 사용자가 설정 화면을 열면, **Then** 다운로드 경로, 기본 화질, 동시 다운로드 수, 파일 명명 규칙 등의 설정 항목이 표시된다.
2. **Given** 설정 화면에서 값을 변경한 상태, **When** 사용자가 저장 버튼을 누르면, **Then** 설정이 저장되고 이후 다운로드에 반영된다.
3. **Given** 설정이 저장된 상태, **When** 앱을 종료 후 재시작하면, **Then** 이전에 저장한 설정이 그대로 유지된다.

---

### Edge Cases

- 잘못된 URL(YouTube가 아닌 URL, 존재하지 않는 비디오, 비공개 비디오)을 입력한 경우 적절한 오류 메시지를 표시해야 한다.
- 네트워크 연결이 끊어진 상태에서 다운로드를 시도하면 오류를 표시하고, 연결 복구 후 재시도할 수 있어야 한다.
- 다운로드 중 디스크 공간이 부족한 경우 사용자에게 알리고 다운로드를 중단해야 한다.
- 연령 제한이 있는 비디오의 경우 브라우저 쿠키를 통해 접근을 시도하고, 쿠키가 없거나 인증 실패 시 사유를 안내해야 한다.
- 동일한 비디오를 중복 다운로드하려는 경우 다운로드 이력을 기반으로 감지하여 사용자에게 확인을 요청해야 한다.
- 첫 실행 시 yt-dlp/ffmpeg 자동 다운로드가 네트워크 오류 등으로 실패한 경우 명확한 오류 메시지와 재시도 옵션을 제공해야 한다.
- yt-dlp/ffmpeg 자동 업데이트 중 실패해도 기존 버전으로 정상 동작해야 한다.
- 매우 긴 비디오(수 시간 이상)나 라이브 스트림 URL을 입력한 경우 적절히 처리해야 한다.

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 YouTube 비디오 URL만 입력받아 유효성을 검증할 수 있어야 한다 (youtube.com, youtu.be, youtube.com/shorts 등 YouTube URL 형식만 지원). YouTube가 아닌 URL은 명확한 안내와 함께 거부해야 한다.
- **FR-002**: 시스템은 입력된 URL에서 비디오 메타데이터(제목, 썸네일, 길이, 게시일, 사용 가능한 포맷/화질 목록)를 가져와 표시해야 한다.
- **FR-003**: 사용자는 다운로드 전에 원하는 화질(예: 2160p, 1080p, 720p, 480p, 360p)과 포맷(비디오+오디오, 오디오만)을 선택할 수 있어야 한다.
- **FR-004**: 시스템은 다운로드 진행 상황(진행률 퍼센트, 다운로드 속도, 예상 남은 시간)을 실시간으로 표시해야 한다.
- **FR-005**: 사용자는 진행 중인 다운로드를 일시정지, 재개, 취소할 수 있어야 한다.
- **FR-006**: 시스템은 YouTube 채널 URL을 입력받아 해당 채널의 비디오 목록을 가져와 표시해야 한다.
- **FR-007**: 사용자는 채널 비디오 목록에서 개별 선택, 전체 선택, 범위 선택을 할 수 있어야 한다.
- **FR-008**: 시스템은 여러 비디오를 다운로드 큐에 추가하고 순차적으로(설정된 동시 다운로드 수에 따라) 처리할 수 있어야 한다.
- **FR-009**: 시스템은 기본 다운로드 경로, 기본 화질, 동시 다운로드 수(기본값: 3), 파일 명명 규칙 등의 설정을 저장하고 유지해야 한다.
- **FR-010**: 시스템은 다운로드 실패 시 오류 원인을 표시하고 재시도 옵션을 제공해야 한다.
- **FR-011**: 시스템은 YouTube 재생목록(playlist) URL도 지원하여 채널과 동일한 방식으로 비디오 목록을 표시해야 한다.
- **FR-012**: 시스템은 첫 실행 시 yt-dlp와 ffmpeg의 존재 여부를 확인하고, 없으면 자동으로 다운로드하여 앱 데이터 디렉토리에 설치해야 한다. 업데이트가 필요한 경우에도 앱 내에서 자동 업데이트를 처리해야 한다.
- **FR-013**: 시스템은 설치된 브라우저(Chrome, Firefox, Edge 등)에서 YouTube 쿠키를 자동으로 가져와 연령 제한 또는 회원 전용 콘텐츠에 접근할 수 있어야 한다. 설정에서 사용할 브라우저를 선택할 수 있어야 한다.
- **FR-014**: 시스템은 다운로드 완료된 비디오의 이력(제목, 다운로드 날짜, 저장 경로)을 저장하고 이력 화면에서 조회할 수 있어야 한다. 이력 데이터는 앱 재시작 후에도 유지되어야 한다.

### Key Entities

- **Video**: YouTube 비디오를 나타냄. URL, 제목, 썸네일 이미지, 길이, 게시일, 사용 가능한 포맷/화질 목록, 파일 크기 정보를 포함한다.
- **Channel**: YouTube 채널을 나타냄. URL, 채널명, 채널 아이콘, 소속 비디오 목록과의 관계를 가진다.
- **Playlist**: YouTube 재생목록을 나타냄. URL, 재생목록 이름, 소속 비디오 목록과의 관계를 가진다.
- **Download Task**: 개별 다운로드 작업을 나타냄. 대상 비디오 참조, 선택된 화질/포맷, 진행률, 다운로드 속도, 상태(대기/진행 중/일시정지/완료/오류), 저장 경로를 포함한다.
- **Download History**: 완료된 다운로드의 이력을 나타냄. 비디오 제목, URL, 다운로드 완료 날짜, 저장 경로, 선택했던 화질/포맷 정보를 포함한다. 중복 다운로드 감지에도 활용된다.
- **Settings**: 사용자 설정을 나타냄. 기본 다운로드 경로, 기본 화질, 동시 다운로드 수, 파일 명명 규칙, 쿠키 브라우저 선택을 포함한다.

## Assumptions

- 앱은 첫 실행 시 yt-dlp와 ffmpeg가 없으면 자동으로 다운로드하여 앱 데이터 디렉토리에 설치한다. 이후 업데이트도 앱 내에서 처리한다.
- 다운로드 기본 경로는 운영 체제의 기본 다운로드 폴더로 설정된다.
- 동시 다운로드 기본 수는 3개로 설정된다.
- 오디오만 다운로드 시 기본 포맷은 mp3로 한다.
- 비디오+오디오 다운로드 시 기본 컨테이너는 mp4로 한다.
- 파일 명명 규칙의 기본값은 비디오 제목을 기반으로 한다.
- 채널 비디오 목록은 최신순으로 정렬하여 표시한다.
- 앱은 데스크톱 환경(Windows, macOS, Linux)을 대상으로 한다.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 URL 붙여넣기부터 다운로드 시작까지 3단계(URL 입력 → 정보 확인 → 다운로드) 이내에 완료할 수 있다.
- **SC-002**: 비디오 메타데이터 로딩이 URL 입력 후 5초 이내에 완료된다.
- **SC-003**: 채널 비디오 목록의 첫 페이지(최소 20개)가 10초 이내에 로드된다.
- **SC-004**: 다운로드 진행률 업데이트가 최소 1초 간격으로 실시간 반영된다.
- **SC-005**: 90% 이상의 사용자가 별도의 가이드 없이 첫 비디오 다운로드를 완료할 수 있다.
- **SC-006**: 다운로드 실패 시 오류 메시지만으로 사용자가 원인을 파악하고 대응할 수 있다.
- **SC-007**: 설정 변경 사항이 앱 재시작 후 100% 유지된다.
